---
import Layout from '../layouts/Layout.astro';
import yaml from 'yaml';
import { readFileSync } from 'fs';

const data = yaml.parse(readFileSync('src/data/kapely.yaml', 'utf-8'));

const sections = [
  { key: 'nyni', title: 'Nyní' },
  { key: 'drive', title: 'Dříve' },
];
---

<Layout title="Kapely" description="Kapely Vojtěcha Semeckého">
  <div class="py-12">
    <h1 class="text-3xl font-bold mb-8">Kapely</h1>

    {sections.map(section => (
      <section class="mb-10">
        <h2 class="text-xl font-semibold mb-4 text-gray-300">{section.title}</h2>
        <div class="space-y-4">
          {(data[section.key] || []).map((band: any) => (
            <div class="border-b border-gray-800 pb-4">
              {band.url ? (
                <a href={band.url} target="_blank" rel="noopener noreferrer" class="text-lg font-medium hover:underline">
                  {band.name}
                </a>
              ) : (
                <span class="text-lg font-medium">{band.name}</span>
              )}
              {band.description && (
                <p class="text-sm text-gray-400 mt-1">{band.description}</p>
              )}
            </div>
          ))}
        </div>
      </section>
    ))}
  </div>
</Layout>
