---
import Layout from '../layouts/Layout.astro';
import yaml from 'yaml';
import { readFileSync } from 'fs';

const projekty = yaml.parse(readFileSync('src/data/projekty.yaml', 'utf-8'));

// Generate favicon URL from project URL
function getFaviconUrl(url: string): string {
  return `https://t2.gstatic.com/faviconV2?client=SOCIAL&type=FAVICON&fallback_opts=TYPE,SIZE,URL&url=${encodeURIComponent(url)}&size=128`;
}
---

<Layout title="Projekty" description="Projekty Vojtěcha Semeckého">
  <div class="py-12">
    <h1 class="text-3xl font-bold mb-8">Projekty</h1>

    <div class="space-y-6">
      {projekty.map((projekt: any) => (
        <div class="border-b border-gray-800 pb-6 flex items-start gap-3">
          {projekt.url && (
            <img 
              src={getFaviconUrl(projekt.url)} 
              alt={`${projekt.name} favicon`}
              class="w-6 h-6 mt-0.5 flex-shrink-0"
            />
          )}
          <div class="flex-1">
            {projekt.url ? (
              <a href={projekt.url} target="_blank" rel="noopener noreferrer" class="text-lg font-medium hover:underline">
                {projekt.name}
              </a>
            ) : (
              <span class="text-lg font-medium">{projekt.name}</span>
            )}
            {projekt.description && (
              <p class="text-sm text-gray-400 mt-1">{projekt.description}</p>
            )}
          </div>
        </div>
      ))}
    </div>
  </div>
</Layout>
